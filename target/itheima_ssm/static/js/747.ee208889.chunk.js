"use strict";(self.webpackChunkdemo_ts=self.webpackChunkdemo_ts||[]).push([[747],{4691:function(e,r,t){t.r(r);var n=t(9439),a=t(2791),s=t(586),l=t(7947),o=t(3695),c=t(3430),u=t(6592),i=t(9389),d=t(5581),h=t(7309),m=(t(1616),t(8329)),Z=t(7689),p=t(607),x=t(691),f=t.n(x),g=(t(335),t(9434)),j=t(7707),b=t(448),w=t(184),P=s.Z.Header,C=s.Z.Footer,y=s.Z.Content,k=function(){var e=(0,g.I0)(),r=l.Z.useForm(),t=(0,n.Z)(r,1)[0],s=l.Z.useWatch("username",t),x=l.Z.useWatch("password",t),P=l.Z.useWatch("enterPassword",t),C=l.Z.useWatch("realeName",t),y=l.Z.useWatch("gender",t),k=l.Z.useWatch("tel",t),v=l.Z.useWatch("email",t),I=l.Z.useWatch("departmentUid",t),S=l.Z.useWatch("leaderUid",t),q=l.Z.useWatch("rememberme",t),A=(0,a.useState)([]),W=(0,n.Z)(A,2),z=W[0],B=W[1],F=(0,a.useState)([]),L=(0,n.Z)(F,2),$=L[0],N=L[1],U=(0,a.useState)("teacher"),_=(0,n.Z)(U,2),T=_[0],G=_[1],H=(0,a.useState)(!0),O=(0,n.Z)(H,2),V=O[0],Q=O[1],Y=(0,Z.s0)(),D=function(){(0,p.Y9)(s,x,C,y,k,v,I).then((function(e){o.ZP.success(e.msg),K(T)}))},E=function(){(0,p.rv)(s,x,C,y,k,v,S).then((function(e){o.ZP.success(e.msg),K(T)}))},J=function(){(0,p.QA)(s,x,C,y,k,v).then((function(e){o.ZP.success(e.msg),K(T)}))},K=function(r){if(q)switch(r){case"teacher":(0,p.tz)(s,x).then((function(r){200===r.code?(e((0,j.ex)()),o.ZP.success(r.msg),M("teacher"),R(),Y("/home/teacher")):(o.ZP.error(r.msg),Y("/login")),f().done(!0)}));break;case"department":(0,p.CS)(s,x).then((function(r){200===r.code?(e((0,j.Af)()),o.ZP.success(r.msg),M("department"),R(),Y("/home/department")):(o.ZP.error(r.msg),Y("/login")),f().done(!0)}));break;case"leader":(0,p.d2)(s,x).then((function(r){200===r.code?(e((0,j.n$)()),o.ZP.success(r.msg),M("leader"),R(),Y("/home/leader")):(o.ZP.error(r.msg),Y("/login")),f().done(!0)}));break;default:o.ZP.error("\u7cfb\u7edf\u9519\u8bef\uff0c\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u6ce8\u518c\u7c7b\u578b")}else Y("/login");f().done(!0)},M=function(r){e((0,b.x4)()),m.Z.set("userType",r,{expires:7,path:"/",sameSite:"strict"})},R=function(){m.Z.set("username",s,{expires:7,path:"/",sameSite:"strict"}),m.Z.set("password",x,{expires:7,path:"/",sameSite:"strict"})},X=function(){f().inc(),(0,p.qI)().then((function(e){f().done(!0);var r=e.body.map((function(e){return{value:e.uid,label:e.realeName}}));B(r)}))},ee=function(){f().inc(),(0,p.UH)().then((function(e){f().done(!0);var r=e.body.map((function(e){return{value:e.uid,label:e.realeName}}));N(r)}))};return(0,w.jsxs)(l.Z,{form:t,name:"login",labelCol:{span:8},wrapperCol:{span:8},onFinish:function(){if(V)if(x===P)switch(f().inc(),T){case"teacher":D();break;case"department":E();break;case"leader":J();break;default:o.ZP.error("\u7cfb\u7edf\u9519\u8bef\uff0c\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u6ce8\u518c\u7c7b\u578b")}else o.ZP.error("\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4");else o.ZP.error("\u7528\u6237\u540d\u5df2\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165")},initialValues:{gender:"\u7537",rememberme:!0},children:[(0,w.jsx)(l.Z.Item,{wrapperCol:{},children:(0,w.jsxs)(u.ZP.Group,{defaultValue:"teacher",buttonStyle:"solid",onChange:function(e){G(e.target.value)},children:[(0,w.jsx)(u.ZP.Button,{value:"leader",children:"\u9886\u5bfc\u6ce8\u518c"}),(0,w.jsx)(u.ZP.Button,{value:"department",children:"\u90e8\u95e8\u6ce8\u518c"}),(0,w.jsx)(u.ZP.Button,{value:"teacher",children:"\u6559\u5e08\u6ce8\u518c"})]})}),(0,w.jsx)(l.Z.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7528\u6237\u540d\uff08\u4e0d\u8d85\u8fc720\u5b57\u7b26\uff09",pattern:/^[a-zA-Z0-9]{1,20}$/}],children:(0,w.jsx)(i.Z,{showCount:!0,maxLength:20,allowClear:!0,onChange:function(e){!function(e){switch(T){case"teacher":(0,p.Su)(e.target.value).then((function(e){200!==e.code?(Q(!1),o.ZP.error(e.msg)):Q(!0)}));break;case"department":(0,p.rA)(e.target.value).then((function(e){200!==e.code?(Q(!1),o.ZP.error(e.msg)):Q(!0)}));break;case"leader":(0,p.lg)(e.target.value).then((function(e){200!==e.code?(Q(!1),o.ZP.error(e.msg)):Q(!0)}));break;default:o.ZP.error("\u7cfb\u7edf\u9519\u8bef\uff0c\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u6ce8\u518c\u7c7b\u578b")}}(e)}})}),(0,w.jsx)(l.Z.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u5bc6\u7801\u5fc5\u987b\u4e3a8-20\u4f4d\u5b57\u6bcd\u6216\u6570\u5b57",pattern:/^[a-zA-Z0-9]{8,20}$/}],children:(0,w.jsx)(i.Z.Password,{showCount:!0,maxLength:20,allowClear:!0})}),(0,w.jsx)(l.Z.Item,{label:"\u786e\u8ba4\u5bc6\u7801",name:"enterPassword",rules:[{required:!0,message:"\u5bc6\u7801\u5fc5\u987b\u4e3a8-20\u4f4d\u5b57\u6bcd\u6216\u6570\u5b57",pattern:/^[a-zA-Z0-9]{8,20}$/}],children:(0,w.jsx)(i.Z.Password,{showCount:!0,maxLength:20,allowClear:!0})}),(0,w.jsx)(l.Z.Item,{label:"\u771f\u5b9e\u59d3\u540d",name:"realeName",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u771f\u5b9e\u59d3\u540d",pattern:/^[\u4e00-\u9fa5]{2,4}$/}],children:(0,w.jsx)(i.Z,{showCount:!0,maxLength:4,allowClear:!0})}),(0,w.jsx)(l.Z.Item,{label:"\u6027\u522b",name:"gender",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u60a8\u7684\u6027\u522b"}],children:(0,w.jsxs)(u.ZP.Group,{buttonStyle:"solid",style:{display:"flex"},children:[(0,w.jsx)(u.ZP.Button,{value:"\u7537",children:"\u7537"}),(0,w.jsx)(u.ZP.Button,{value:"\u5973",children:"\u5973"})]})}),(0,w.jsx)(l.Z.Item,{label:"\u8054\u7cfb\u7535\u8bdd",name:"tel",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u8054\u7cfb\u7535\u8bdd",pattern:/^1[3456789]\d{9}$/}],children:(0,w.jsx)(i.Z,{type:"tel",showCount:!0,maxLength:11,allowClear:!0})}),(0,w.jsx)(l.Z.Item,{label:"\u7535\u5b50\u90ae\u4ef6",name:"email",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u60a8\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740",pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/}],children:(0,w.jsx)(i.Z,{type:"email",showCount:!0,maxLength:30,allowClear:!0})}),"teacher"===T?(0,w.jsx)(l.Z.Item,{label:"\u90e8\u95e8",name:"departmentUid",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u60a8\u7684\u4e0a\u7ea7\u90e8\u95e8"}],children:(0,w.jsx)(c.Z,{showSearch:!0,style:{width:"100%"},onFocus:X,placeholder:"\u8bf7\u9009\u62e9\u4f60\u7684\u4e0a\u7ea7\u90e8\u95e8",options:z})}):"department"===T?(0,w.jsx)(l.Z.Item,{label:"\u9886\u5bfc",name:"leaderUid",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u60a8\u7684\u4e0a\u7ea7\u9886\u5bfc"}],children:(0,w.jsx)(c.Z,{showSearch:!0,style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u60a8\u7684\u4e0a\u7ea7\u9886\u5bfc",onFocus:ee,options:$})}):null,(0,w.jsx)(l.Z.Item,{label:"\u662f\u5426\u81ea\u52a8\u767b\u5f55",name:"rememberme",valuePropName:"checked",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u662f\u5426\u81ea\u52a8\u767b\u5f55"}],children:(0,w.jsx)(d.Z,{style:{display:"flex"},checkedChildren:"\u662f",unCheckedChildren:"\u5426"})}),(0,w.jsxs)(l.Z.Item,{wrapperCol:{},children:[(0,w.jsx)(h.Z,{type:"primary",htmlType:"submit",children:"\u6ce8\u518c"}),"\xa0\xa0\xa0\xa0",(0,w.jsx)(h.Z,{htmlType:"button",onClick:function(){t.resetFields()},children:"\u91cd\u7f6e"}),"\xa0\xa0\xa0\xa0",(0,w.jsx)(h.Z,{htmlType:"button",onClick:function(){Y("/login")},children:"\u767b\u5f55"})]})]})};r.default=function(){return(0,w.jsxs)(s.Z,{children:[(0,w.jsx)(P,{children:(0,w.jsx)("span",{children:"\u6821\u56ed OA \u7cfb\u7edf\u6ce8\u518c"})}),(0,w.jsx)(y,{children:(0,w.jsx)(k,{})}),(0,w.jsx)(C,{children:"\u6821\u56ed OA \u7cfb\u7edf \xa9 2022 Created By allynlin"})]})}},1616:function(){}}]);
//# sourceMappingURL=747.ee208889.chunk.js.map